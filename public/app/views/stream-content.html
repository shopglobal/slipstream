<div class="list-container">

	<div class="content-list">

		<div infinite-scroll="content.loadMore(3)" infinite-scroll-immediate-check="true">

			<div class="panel panel-item" ng-repeat="item in content.items" ng-hide="hideItem">
				<h2 ng-hide=" item.stream == 'read' " data-ng-bind="item.title" class="title-stream-item"></h2>

				<a ng-click="openReaderModal( item )" class="cursor-pointer title-stream-item" ng-show=" item.stream == 'read' ">
					<h2 data-ng-bind="item.title" class="title-stream-item"></h2>
				</a>
				
				<div class="add-container pull-right button-stream-item-top" ng-hide="  mode == 'mystream' ">
					<a href="" ng-click="addContent( item.url )"><div class="add-button">+</div></a>
				</div>

				<div ng-class="{ 'watch-iframe' : item.stream == 'watch', 'listen-iframe' : item.stream == 'listen' }" iframely url="{{ item.url }}" ng-if=" item.stream != 'read' "></div>

				<img ng-click="openReaderModal( item )" ng-src="{{ item.images[0].thumb }}" class="stream-article-image cursor-pointer" ng-show=" item.stream == 'read' ">

				<div class="item-description">
					<span ng-hide=" item.stream == 'listen' "><span ng-bind="item.description | stripTags | limitTo: 260"></span> ...</span>

					<div class="clearfix"></div>

					<div class="content-tags" ng-if=" mode == 'mystream' ">
						<tags-input 
							ng-model="item.tags" 
							on-tag-added="tagAdded( $tag, item._id )"
							on-tag-removed="tagRemoved( $tag, item._id )"
							class="no-padding">
						</tags-input>
					</div>

				</div>

				<div class="clearfix"></div>

				<div class="date-added-ago pull-left meta-text">
					<span ng-if=" mode == 'discover' || mode == 'following' ">
						Saved by 
						<a ui-sref="app.stream({ username: item.user.username, stream: currentStream, mode: 'stream' } )" ui-sref-opts="{ reload: true }" ng-bind="item.user.username" class="cursor-pointer a-underlined"></a>
						<span ng-show=" item.saveCount >= 2 && mode == 'discover' "> and
							<span ng-bind="item.saveCount - 1"></span> other<span ng-show="item.saveCount > 2">s</span>
						</span>
					</span>
					<span ng-bind="item.added | timeAgo"></span>
					<span ng-show="item.private" class="glyphicon glyphicon-lock"></span>
				</div>

				<div class="share-links">
					<ng-include src="'app/views/menu-share.html'"></ng-include>

					<span class="dropdown user-menu">
					  <button class="btn dropdown-toggle no-border btn-grey" type="button" id="item-options" data-toggle="dropdown" aria-expanded="true">
					    <span class="glyphicon glyphicon-option-horizontal glyphicon-grey"></span>
					    <span class="sr-only">
							Toggle Item Options Menu
						</span>
					  </button>
					  
					  <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="item-options">
					    <li role="presentation" ng-hide=" mode != 'mystream' ">
					    	<a role="menuitem" tabindex="-1" ng-click="deleteItem( currentStream, item._id ); hideItem=true" class="cursor-pointer"><span class="glyphicon glyphicon-trash"></span>  Delete post</a>
					    </li>
					    <li role="presentation">
					    	<a href="{{ item.url }}" target="_blank" class="cursor-pointer"><span class="glyphicon glyphicon-link"></span> Open original</a>
					    </li>
					    <li role="presentation" ng-show=" mode == 'mystream' && !item.private ">
					    	<a ng-click="togglePrivate( item )" class="cursor-pointer"></span><span class="glyphicon glyphicon-lock"></span> Make private</a>
					    </li>
					    <li role="presentation" ng-show=" mode == 'mystream' && item.private ">
					    	<a ng-click="togglePrivate( item )" class="cursor-pointer"></span><span class="glyphicon glyphicon-eye-open"></span> Make public</a>
					    </li>
					    <!-- Admin options -->
					    <li role="presentation" ng-show=" role == 'admin' ">
					    	<a ng-click="flag( { item: item, flag: 'hidden' } )" class="cursor-pointer"><span class="glyphicon glyphicon-ban-circle"></span> Flag hidden</a>
					    </li>
					    <li role="presentation" ng-show=" role == 'admin' ">
					    	<a ng-click="flag( { item: item, flag: 'adult' } )" class="cursor-pointer"><span class="glyphicon glyphicon-flag"></span> Flag adult</a>
					    </li>
					  </ul>
					</span>
				</div>
				
				<div class="clearfix"></div>
			</div>


		</div>

		<div ng-show=" userlist.length > 0 ">
			<div class="panel panel-item panel-user" ng-repeat="user in userlist">
				<div class="col-xs-6">
					<a ui-sref="app.stream({ username: user.username })" ui-sref-opts="{ reload: true }"><h3 ng-bind="user.username"></h3></a>
				</div>
				<div class="col-xs-6">
					<button-follow username="{{ user.username }}"></button-follow>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>

	</div>

</div>